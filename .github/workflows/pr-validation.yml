name: PR Validation

on:
  pull_request:
    branches: [main]

jobs:
  validate-base-branch:
    name: validate-base-branch
    runs-on: ubuntu-latest
    steps:
      - name: Validar origem do PR
        run: |
          HEAD_REF="${{ github.event.pull_request.head.ref }}"
          BASE_REF="${{ github.event.pull_request.base.ref }}"
          
          echo "üîç Validando PR:"
          echo "   De: $HEAD_REF"
          echo "   Para: $BASE_REF"
          
          if [ "$BASE_REF" = "main" ] && [ "$HEAD_REF" != "dev" ]; then
            echo ""
            echo "‚ùå ERRO: Pull requests para 'main' devem vir da branch 'dev'"
            echo ""
            echo "üìã Git Flow do projeto:"
            echo "   feature/fix ‚Üí dev (via PR)"
            echo "   dev ‚Üí main (via PR)"
            echo ""
            echo "üí° Solu√ß√£o:"
            echo "   1. Feche este PR"
            echo "   2. Abra PR: $HEAD_REF ‚Üí dev"
            echo "   3. Ap√≥s merge em dev, abra PR: dev ‚Üí main"
            exit 1
          fi
          
          echo "‚úÖ Valida√ß√£o passou!"

